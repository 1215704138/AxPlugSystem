# 轻量级Boost实现 - 最小化依赖

add_library(BoostTcpClientLitePlugin SHARED
    include/BoostTcpClientLite.h
    src/BoostTcpClientLite.cpp
    src/boost_lite_module.cpp
)

# 插件导出宏
setup_plugin_target(BoostTcpClientLitePlugin)

# 输出目录
set_target_properties(BoostTcpClientLitePlugin PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin"
    ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
)

target_include_directories(BoostTcpClientLitePlugin PRIVATE
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/src/driver/TcpClient
    ${CMAKE_SOURCE_DIR}/deps/boost/include
)

# 轻量级版本只需要最小依赖
# 注意：某些Boost.Asio功能可能仍需要system库，但已最小化
target_link_libraries(BoostTcpClientLitePlugin PRIVATE 
    AxInterface 
    ws2_32
    # 如果编译时报错，取消下面这行的注释
    # ${CMAKE_SOURCE_DIR}/deps/boost/lib/libboost_system.lib
)

target_compile_definitions(BoostTcpClientLitePlugin PRIVATE 
    WIN32_LEAN_AND_MEAN
    BOOST_ASIO_ENABLE_HANDLER_TRACKING
    BOOST_ALL_NO_LIB
    # 如果完全不想依赖任何Boost库，可以定义这个
    # BOOST_ASIO_SEPARATE_COMPILATION
)
